<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Antibiotic & Infection Guide</title>
<style>
/* Top banner */
#top-banner {
  background-color: #004080;
  color: white;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  padding: 8px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-sizing: border-box;
  font-size: 1.2em;
  font-weight: bold;
  z-index: 1000;
}

#top-banner h1 { margin:0; font-size:1.4em; }

.search-container { display:flex; align-items:center; gap:6px; }
#search-bar { padding:4px 6px; border:none; border-radius:4px; font-size:0.9em; width:180px; }
#search-btn { background:#0066cc; color:white; border:none; border-radius:4px; cursor:pointer; padding:4px 8px; font-size:0.9em; }
#search-btn:hover { background:#0050a0; }

body { font-family: Arial, sans-serif; margin:0; padding:0; }
.container { display:flex; margin-top:40px; height:calc(100vh - 40px); }
nav { width:260px; background:#e0e0e0; overflow-y:auto; padding:0.5rem; height:100%; position:sticky; top:0; }
nav ul { list-style:none; padding:0; margin:0; }
nav li { border-bottom:1px solid #ccc; cursor:pointer; padding:0.5rem; }
nav li:hover { background:#cce0ff; }
nav .sub-menu { display:none; padding-left:1rem; background:#d0d0d0; }

main { flex:1; overflow-y:auto; padding:1rem; background:#f5f5f5; }

h2 { color:#004080; margin-top:2rem; }
table { border-collapse:collapse; width:100%; margin-bottom:1rem; }
table, th, td { border:1px solid #999; }
th, td { padding:0.5rem; text-align:left; }
tr:nth-child(even){background-color:#f2f2f2;}

.collapsible { background:#ddd; cursor:pointer; padding:0.5rem; width:100%; border:none; text-align:left; outline:none; font-size:1rem; margin-top:0.5rem; }
.active, .collapsible:hover { background:#ccc; }
.content, .content-panel { padding:0 1rem; display:none; overflow:hidden; background:#f9f9f9; margin-bottom:1rem; }

.quick-tips { background:#ffffcc; border:1px solid #cccc99; padding:0.5rem; margin:0.5rem 0; color:#333; text-align:left; }
.quick-tips ul { margin-left:1rem; padding-left:0; list-style-type:disc; }

.calculator { background:#eef; border:1px solid #99c; padding:0.5rem; margin-bottom:1rem; }
input[type=number] { width:80px; }

.color-grampos { background-color:#c6efce; }
.color-gramneg { background-color:#ffeb9c; }
.color-anaerobe { background-color:#ffc7ce; }
.color-intracellular { background-color:#d9d2e9; }
</style>
</head>
<body>

<div id="top-banner">
  <h1>Antibiotic and Infection Guide</h1>
  <div class="search-container">
    <input type="text" id="search-bar" placeholder="Search..." />
    <button id="search-btn">üîç</button>
  </div>
</div>

<div class="container">
<nav>
  <ul>
    <li class="nav-item" data-target="homepage">Home</li>
    <li class="expandable">Empiric Therapy
      <ul class="sub-menu">
        <li class="nav-item" data-target="empiric-therapy">General Empiric Therapy</li>
        <li class="nav-item" data-target="empiric-grampos">Gram-Positive Cocci</li>
        <li class="nav-item" data-target="empiric-gramneg">Gram-Negative Rods & Cocci</li>
        <li class="nav-item" data-target="empiric-anaerobes">Anaerobes</li>
        <li class="nav-item" data-target="empiric-intracellular">Intracellular / Fastidious</li>
      </ul>
    </li>
    <li class="expandable">Infections by Anatomic Site
      <ul class="sub-menu">
        <li class="nav-item" data-target="head-neck">Head & Neck</li>
        <li class="nav-item" data-target="respiratory">Respiratory Tract</li>
        <li class="nav-item" data-target="urinary">Urinary Tract / Pyelonephritis</li>
        <li class="nav-item" data-target="gastrointestinal">Gastrointestinal / Intra-abdominal</li>
        <li class="nav-item" data-target="skin-softtissue">Skin & Soft Tissue</li>
        <li class="nav-item" data-target="bone-joint">Bone & Joint</li>
      </ul>
    </li>
    <li class="nav-item" data-target="sepsis">Sepsis</li>
    <li class="expandable">Pathogen-Based Guidance
      <ul class="sub-menu">
        <li class="nav-item" data-target="pathogen-guidance">Therapy & Dosing</li>
      </ul>
    </li>
    <li class="nav-item" data-target="antibiotic-classes">Antibiotic Classes / Escalation</li>
    <li class="nav-item" data-target="fungal-infections">Fungal Infections</li>
    <li class="nav-item" data-target="viral-infections">Viral Infections</li>
    <li class="nav-item" data-target="calculators">Calculators</li>
    <li class="nav-item" data-target="references">References</li>
  </ul>
</nav>

<main>
<section id="homepage" class="content-panel">
<header>
  <img src="mutant-icon.png" alt="Antibiotic Guide Icon" style="width:80px;height:80px;display:block;margin:0.5rem auto;">
  <h2>Antibiotic & Infection Guide</h2>
  <div class="quick-tips">
    <strong>Quick Tips:</strong>
    <ul>
      <li>Start empiric therapy within 1 hour for sepsis.</li>
      <li>Adjust antibiotics based on culture & sensitivity.</li>
      <li>Consider organ function for dosing adjustments.</li>
      <li>Duration depends on site, severity, and clinical response.</li>
      <li>Review local resistance patterns before therapy.</li>
      <li>Document rationale for escalation/de-escalation.</li>
    </ul>
  </div>
</header>
</section>

<!-- General Empiric Therapy -->
<section id="empiric-therapy" class="content-panel">
<h2>Empiric Therapy & Sepsis Assessment</h2>

<div class="calculator">
<h3>Patient Data</h3>
<label>Age: <input type="number" id="et-age" min="0"></label>
<label>Sex: 
  <select id="et-sex">
    <option value="M">Male</option>
    <option value="F">Female</option>
  </select>
</label>
<label>Weight: <input type="number" id="et-weight" min="0">
  <select id="et-weight-unit">
    <option value="kg">kg</option>
    <option value="lb">lb</option>
  </select>
</label>
<label>Serum Creatinine (mg/dL): <input type="number" id="et-cr" step="0.1"></label>
<label>Temperature (¬∞C): <input type="number" id="et-temp" step="0.1"></label>
<label>Heart Rate (bpm): <input type="number" id="et-hr"></label>
<label>Respiratory Rate (breaths/min): <input type="number" id="et-rr"></label>
<label>Blood Pressure (mmHg, MAP): <input type="number" id="et-map"></label>
<label>Mental Status: 
  <select id="et-mental">
    <option value="alert">Alert</option>
    <option value="confused">Confused</option>
    <option value="unresponsive">Unresponsive</option>
  </select>
</label>
</div>

<div class="calculator">
<h3>Calculators</h3>
<button onclick="calculateSIRS()">Calculate SIRS</button> 
<button onclick="calculateqSOFA()">Calculate qSOFA</button>
<button onclick="calculateCrCl()">Calculate CrCl</button>
<div id="et-results" style="margin-top:1rem;"></div>
</div>

<div>
<h3>Empiric Therapy Recommendations</h3>
<p>Recommendations update dynamically as patient data is entered and lab results are provided.</p>
<table>
<thead>
<tr>
<th>Suspected Source</th><th>Empiric Therapy</th><th>Notes / Dose Adjustments</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sepsis of Unknown Source</td>
<td>Meropenem 1g IV q8h + Vancomycin (dose per CrCl)</td>
<td>Adjust doses for renal function; consider allergy status</td>
</tr>
<tr>
<td>Community-Acquired Pneumonia, Severe</td>
<td>Ceftriaxone 2g IV q24h + Azithromycin 500mg IV q24h</td>
<td>Adjust for renal impairment; monitor liver function</td>
</tr>
<tr>
<td>Urinary Tract / Pyelonephritis, Severe</td>
<td>Piperacillin-Tazobactam 4.5g IV q6-8h</td>
<td>Renal dosing required; adjust based on culture</td>
</tr>
</tbody>
</table>
</div>
</section>

<script>
// ----------------------------
// Navigation logic
// ----------------------------
document.querySelectorAll('.expandable').forEach(item=>{
  item.addEventListener('click',()=>{ 
    const sub=item.querySelector('.sub-menu');
    if(sub) sub.style.display=(sub.style.display==='block')?'none':'block';
  });
});

document.querySelectorAll('.nav-item').forEach(item=>{
  item.addEventListener('click',e=>{
    e.stopPropagation();
    document.querySelectorAll('.content-panel').forEach(c=>c.style.display='none');
    const target=document.getElementById(item.getAttribute('data-target'));
    if(target) target.style.display='block';
  });
});

// ----------------------------
// Collapsibles
// ----------------------------
document.querySelectorAll('.collapsible').forEach(btn=>{
  btn.addEventListener('click',function(){
    this.classList.toggle('active');
    const content=this.nextElementSibling;
    content.style.display=(content.style.display==='block')?'none':'block';
  });
});

// ----------------------------
// Calculators
// ----------------------------
function calculateSIRS(){
  const temp=parseFloat(document.getElementById('et-temp').value);
  const hr=parseInt(document.getElementById('et-hr').value);
  const rr=parseInt(document.getElementById('et-rr').value);
  let criteria=0;
  if(temp<36||temp>38) criteria++;
  if(hr>90) criteria++;
  if(rr>20) criteria++;
  document.getElementById('et-results').innerHTML=`SIRS Criteria Met: ${criteria} ${criteria>=2?'(Suggests SIRS)':''}`;
}

function calculateqSOFA(){
  const rr=parseInt(document.getElementById('et-rr').value);
  const map=parseInt(document.getElementById('et-map').value);
  const mental=document.getElementById('et-mental').value;
  let score=0;
  if(rr>=22) score++;
  if(map<=65) score++;
  if(mental!=='alert') score++;
  document.getElementById('et-results').innerHTML+=`<br>qSOFA Score: ${score} ${score>=2?'(High risk for poor outcome)':''}`;
}

function calculateCrCl(){
  let age=parseFloat(document.getElementById('et-age').value);
  let cr=parseFloat(document.getElementById('et-cr').value);
  let weight=parseFloat(document.getElementById('et-weight').value);
  const sex=document.getElementById('et-sex').value;
  const unit=document.getElementById('et-weight-unit').value;
  if(unit==='lb') weight/=2.20462;
  if(!age||!cr||!weight){
    document.getElementById('et-results').innerHTML+='<br>Enter age, weight, and serum creatinine to calculate CrCl.';
    return;
  }
  let crcl=((140-age)*weight)/(72*cr);
  if(sex==='F') crcl*=0.85;
  document.getElementById('et-results').innerHTML+=`<br>Estimated CrCl: ${crcl.toFixed(1)} mL/min`;
}

// ----------------------------
// Search
// ----------------------------
document.getElementById('search-btn').addEventListener('click',()=>{
  const query=document.getElementById('search-bar').value.toLowerCase();
  let found=false;
  document.querySelectorAll('main section').forEach(sec=>{
    if(sec.textContent.toLowerCase().includes(query)){
      sec.scrollIntoView({behavior:'smooth'});
      sec.style.border='2px solid #004080';
      setTimeout(()=>sec.style.border='',2000);
      found=true;
    }
  });
  if(!found && query.trim()!=='') alert('No matches found.');
});

// ----------------------------
// Show homepage by default
// ----------------------------
document.addEventListener('DOMContentLoaded',()=>{ 
  const homepage=document.getElementById('homepage');
  if(homepage) homepage.style.display='block';
});
</script>
</body>
</html>
